var y=function(e){document.readyState==="interactive"||document.readyState==="complete"?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent&&document.attachEvent("onreadystatechange",function(){document.readyState!="loading"&&e()})};y(function(){function e(d){let f=`; ${document.cookie}`.split(`; ${d}=`);if(f.length===2)return f.pop().split(";").shift()}function t(d,p,f){let L=new Date;L.setTime(L.getTime()+f*24*60*60*1e3),document.cookie=`${d}=${p};expires=${L.toUTCString()};path=/;SameSite=Lax`}function r(){document.body.style.overflow="hidden",document.body.style.paddingRight=window.innerWidth-document.documentElement.clientWidth+"px"}function g(){document.body.style.overflow="",document.body.style.paddingRight=""}async function a(){let d=document.getElementById("kp-modal-content");try{let p=await fetch("/about-kevin-pirnie/cookie-policy/");if(!p.ok)throw new Error("Failed to load cookie policy");let f=await p.text(),v=new DOMParser().parseFromString(f,"text/html"),E=v.querySelector(".article-content")||v.querySelector("article")||v.querySelector("main");E?d.innerHTML=E.innerHTML:d.innerHTML='<p class="text-center">Unable to load cookie policy content.</p>'}catch(p){console.error("Error loading cookie policy:",p),d.innerHTML='<p class="text-center text-red-400">Error loading cookie policy. Please visit the <a href="/about-kevin-pirnie/cookie-policy/" class="underline">Cookie Policy page</a>.</p>'}}let u=document.getElementById("kp-cookie-notice"),s=document.getElementById("kp-cookie-overlay"),n=document.getElementById("kp-cookie-accept"),i=document.getElementById("kp-cookie-decline"),m=document.getElementById("kp-cookie-learn-more"),l=document.getElementById("kp-cookie-modal"),c=document.getElementById("kp-modal-close"),o=document.getElementById("kp-modal-overlay"),h=e("kp_cookie_consent");u&&s&&!h&&(u.style.display="block",u.classList.remove("hidden"),s.style.display="block",s.classList.remove("hidden"),r()),n&&n.addEventListener("click",function(){t("kp_cookie_consent","accepted",365),u.style.display="none",s.style.display="none",g()}),i&&i.addEventListener("click",function(){t("kp_cookie_consent","declined",365),window.location.href="https://www.google.com/search?q=why+do+I+need+cookies"}),m&&l&&m.addEventListener("click",function(d){d.preventDefault(),l.classList.remove("hidden"),a()}),c&&l&&c.addEventListener("click",function(){l.classList.add("hidden")}),o&&l&&o.addEventListener("click",function(){l.classList.add("hidden")})});y(function(){let e=document.querySelector(".kpt-hero-slideshow");if(e){let c=function(f){s.forEach(L=>{L.classList.remove("active","prev")}),s[m].classList.add("prev"),m=(f+s.length)%s.length,s[m].classList.add("active")},o=function(){c(m+1)},h=function(){c(m-1)},d=function(){l=setInterval(o,7e3)},p=function(){clearInterval(l)};var t=c,r=o,g=h,a=d,u=p;let s=e.querySelectorAll(".kpt-hero-slide"),n=e.querySelector(".kpt-hero-prev"),i=e.querySelector(".kpt-hero-next"),m=0,l;i.addEventListener("click",o),n.addEventListener("click",h),e.addEventListener("mouseenter",p),e.addEventListener("mouseleave",d),d(),document.addEventListener("keydown",function(f){f.key==="ArrowLeft"&&h(),f.key==="ArrowRight"&&o()})}});y(function(){document.addEventListener("click",function(e){let t=e.target.closest(".dropdown-toggle");if(t){e.preventDefault(),e.stopPropagation();let r=t.closest("li.has-dropdown"),g=r.querySelector(":scope > .submenu"),a=t.querySelector(".fa-solid");if(g){let u=!g.classList.contains("hidden"),s=[],n=r.parentElement;for(;n;)n.classList&&n.classList.contains("submenu")&&s.push(n),n=n.parentElement;document.querySelectorAll(".submenu").forEach(i=>{i!==g&&!s.includes(i)&&i.classList.add("hidden")}),document.querySelectorAll(".dropdown-toggle .fa-solid").forEach(i=>{let l=i.closest("li.has-dropdown")?.querySelector(":scope > .submenu");i!==a&&!s.includes(l)&&i.classList.remove("rotate-180")}),u?(g.classList.add("hidden"),a.classList.remove("rotate-180")):(g.classList.remove("hidden"),a.classList.add("rotate-180"))}}else e.target.closest(".submenu")||(document.querySelectorAll(".submenu").forEach(r=>{r.classList.add("hidden")}),document.querySelectorAll(".dropdown-toggle .fa-solid").forEach(r=>{r.classList.remove("rotate-180")}))}),document.addEventListener("click",function(e){e.target.closest(".has-dropdown")||(document.querySelectorAll(".submenu").forEach(t=>{t.classList.add("hidden")}),document.querySelectorAll(".dropdown-toggle .fa-chevron-down, .dropdown-toggle .fa-chevron-right").forEach(t=>{t.classList.remove("rotate-180")}),document.querySelectorAll(".dropdown-toggle").forEach(t=>{t.setAttribute("aria-expanded","false")}))})});y(function(){let e=document.getElementById("mobile-menu-toggle"),t=document.getElementById("mobile-menu");e&&t&&e.addEventListener("click",function(){t.classList.toggle("hidden"),t.classList.contains("hidden")||(document.querySelectorAll(".submenu-mobile").forEach(a=>{a.classList.add("hidden")}),document.querySelectorAll(".submenu-toggle svg").forEach(a=>{a.classList.remove("rotate-180")}))}),document.querySelectorAll(".submenu-toggle").forEach(a=>{a.addEventListener("click",function(u){u.preventDefault(),u.stopPropagation();let s=this.closest("li"),n=s.querySelector(":scope > .submenu-mobile"),i=this.querySelector("svg");if(n){let m=!n.classList.contains("hidden"),l=[],c=s.parentElement;for(;c;)c.classList&&c.classList.contains("submenu-mobile")&&l.push(c),c=c.parentElement;document.querySelectorAll(".submenu-mobile").forEach(o=>{o!==n&&!l.includes(o)&&o.classList.add("hidden")}),document.querySelectorAll(".submenu-toggle svg").forEach(o=>{let d=o.closest("li")?.querySelector(":scope > .submenu-mobile");o!==i&&!l.includes(d)&&o.classList.remove("rotate-180")}),n.classList.toggle("hidden"),i.classList.toggle("rotate-180")}})}),document.querySelectorAll(".mobile-menu-list .has-submenu > div > a").forEach(a=>{a.addEventListener("click",function(u){u.preventDefault();let s=this.closest("li"),n=s.querySelector(":scope > .submenu-mobile"),i=this.closest("div").querySelector(".submenu-toggle svg");if(n){let m=!n.classList.contains("hidden"),l=[],c=s.parentElement;for(;c;)c.classList&&c.classList.contains("submenu-mobile")&&l.push(c),c=c.parentElement;document.querySelectorAll(".submenu-mobile").forEach(o=>{o!==n&&!l.includes(o)&&o.classList.add("hidden")}),document.querySelectorAll(".submenu-toggle svg").forEach(o=>{let d=o.closest("li")?.querySelector(":scope > .submenu-mobile");o!==i&&!l.includes(d)&&o.classList.remove("rotate-180")}),n.classList.toggle("hidden"),i&&i.classList.toggle("rotate-180")}})})});y(function(){let e=document.getElementById("scroll-to-top");e&&(window.addEventListener("scroll",function(){window.pageYOffset>300?(e.classList.remove("opacity-0","invisible"),e.classList.add("opacity-100","visible")):(e.classList.add("opacity-0","invisible"),e.classList.remove("opacity-100","visible"))}),e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}))});y(function(){let e=document.getElementById("search-toggle"),t=document.getElementById("search-form");e&&t&&e.addEventListener("click",function(){t.classList.toggle("hidden"),t.classList.contains("hidden")||t.querySelector('input[type="search"]').focus()});let r=document.getElementById("search-toggle-mobile");r&&t&&r.addEventListener("click",function(){t.classList.toggle("hidden"),t.classList.contains("hidden")||t.querySelector('input[type="search"]').focus()})});y(function(){let e=0,t=document.getElementById("top-header");t&&window.addEventListener("scroll",function(){let r=window.pageYOffset;r>50&&r>e?t.style.transform="translateY(-100%)":t.style.transform="translateY(0)",e=r})});
